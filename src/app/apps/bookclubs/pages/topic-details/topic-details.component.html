<div class="container mt-5">
  <div>
    <nav aria-label="breadcrumb">
      <ol class="breadcrumb">
        <li class="breadcrumb-item"><a routerLink="../../home">Home</a></li>
        <li class="breadcrumb-item">
          <a routerLink="../../bookclubs">Bookclubs</a>
        </li>
        <li class="breadcrumb-item">
          <a [routerLink]="['../../bookclubs/', bookclub?.id]">
            {{ bookclub?.name }}
          </a>
        </li>
        <li class="breadcrumb-item active" aria-current="page">
          {{ topic?.title }}
        </li>
      </ol>
    </nav>
  </div>
  <div>
    <mat-card class="pt-2 pb-3">
      <mat-card-header>
        <mat-card-title class="fs-3">
          {{ topic?.title }}
          <button *ngIf="topic?.isCreator" mat-icon-button (click)="openTopicDialog()" color="accent">
            <mat-icon>create</mat-icon>
          </button>
        </mat-card-title>
        <mat-card-subtitle>
          Created by: {{ topic?.createdBy }}, on
          {{ topic?.date | date : "d/MM/yyy, h:mm a" }}
        </mat-card-subtitle>
      </mat-card-header>
    </mat-card>
  </div>
  <mat-divider class="my-4"></mat-divider>
  <div *ngIf="posts" class="d-flex flex-column gap-4">
    <bh-post-card *ngFor="let post of posts" [post]="post"></bh-post-card>
  </div>
  <div *ngIf="posts.length <= 0" class="text-center">
    <p>This topic doesn't have any posts yet.</p>
  </div>
  <mat-divider class="my-4"></mat-divider>
  <div class="d-flex flex-column">
    <form class="w-100" (ngSubmit)="onSubmit()">
      <mat-form-field appearance="outline" class="w-100" color="accent">
        <mat-label>Want to share your thoughts?</mat-label>
        <textarea
          #newPostTextArea
          rows="5"
          matInput
          placeholder="Ex. I think that..."
          (keyup)="updateNewPostContent($event)"
        ></textarea>
        <button
          [disabled]="!newPostContent"
          type="submit"
          matSuffix
          mat-icon-button
          color="accent"
        >
          <mat-icon>send</mat-icon>
        </button>
      </mat-form-field>
    </form>
  </div>
</div>
